- name: Create terraform_run directory if it doesn't exist
  ansible.builtin.file:
    path: "{{ playbook_dir }}/autogenerated/terraform_run"
    state: directory
    mode: '0755'
  delegate_to: localhost

- name: Template main.tf.j2 to main.tf
  ansible.builtin.template:
    src: main.tf.j2
    dest: "{{ playbook_dir }}/autogenerated/terraform_run/main.tf"
    mode: '0644'
  delegate_to: localhost

- name: Create manual_scripts directory if it doesn't exist
  ansible.builtin.file:
    path: "{{ playbook_dir }}/autogenerated/manual_scripts"
    state: directory
    mode: '0755'
  delegate_to: localhost